<Page
    x:Class="UniSky.Pages.BookmarksPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:local="using:UniSky.Pages"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:converters="using:UniSky.Converters"
    xmlns:datatemplates="using:UniSky.DataTemplates"
    xmlns:extensions="using:UniSky.Extensions"
    xmlns:profiles="using:UniSky.ViewModels.Profile"
    xmlns:w1809="http://schemas.microsoft.com/winfx/2006/xaml/presentation?IsApiContractPresent(Windows.Foundation.UniversalApiContract, 7)"
    mc:Ignorable="d"
    NavigationCacheMode="Required"
	Loaded="Page_Loaded">
    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <FeedTemplates xmlns="using:UniSky.Templates"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Page.Resources>

    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
        </Grid.RowDefinitions>

        <Grid Grid.Row="0" 
              MaxWidth="600">
            <Grid.RowDefinitions>
                <RowDefinition x:Name="TitleBarPadding" Height="0"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <Border x:Name="HeaderBackground"
                    Grid.RowSpan="4"
                    Background="{ThemeResource GenericPageHeaderBackgroundBrush}"
                    BorderBrush="{ThemeResource SystemControlRevealSeparatorBrush}"
                    extensions:Hairline.BorderThickness="1,0,1,1"/>

            <Border Grid.Row="01" Padding="{ThemeResource GenericPageHeaderMargin}">
                <TextBlock x:Uid="BookmarksPageTitleBlock"
                            Margin="12,4,0,12"
                            Text="BOOKMARKS"
                            Style="{ThemeResource BaseTextBlockStyle}"/>
            </Border>
        </Grid>

        <ListView x:Name="RootList"
                  Style="{StaticResource FeedListViewStyle}"
                  Grid.Row="1"
                  Canvas.ZIndex="-1"
                  ItemsSource="{x:Bind ViewModel.Bookmarks, Mode=OneWay}" 
                  ItemTemplate="{StaticResource FeedItemContentTemplate}"
                  Loaded="RootList_Loaded">
        </ListView>

        <Grid x:Name="NoItemsGrid"
              x:Load="{x:Bind ViewModel.IsEmpty, Mode=OneWay}"
              Grid.Row="1"
              MaxWidth="600"
              Margin="24,80,24,0"
              VerticalAlignment="Top"
              HorizontalAlignment="Center">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="Auto"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            <TextBlock Text="&#xE77A;"
                       FontSize="48"
                       FontFamily="{ThemeResource SymbolThemeFontFamily}"
                       VerticalAlignment="Center"/>
            <StackPanel Margin="16,0,0,0" VerticalAlignment="Center" Grid.Column="1">
                <TextBlock x:Uid="BookmarksPageNoItemsTitle" 
                           TextWrapping="Wrap" 
                           Text="Nothing is bookmarked!" 
                           Style="{ThemeResource TitleTextBlockStyle}"/>
                <TextBlock x:Uid="BookmarksPageNoItemsSubtitle" 
                           Text="Bookmark some posts to get started." 
                           Style="{ThemeResource BodyTextBlockStyle}"/>
            </StackPanel>
        </Grid>

        <ProgressBar Grid.Row="3"
                     MaxWidth="600"
                   VerticalAlignment="Top"
                   IsIndeterminate="{x:Bind ViewModel.IsLoading, Mode=OneWay}"
                   Background="Transparent"/>

        <VisualStateManager.VisualStateGroups>
            <VisualStateGroup>
                <VisualState x:Name="Small">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="0" />
                    </VisualState.StateTriggers>

                    <VisualState.Setters>
                        <Setter Target="HeaderBackground.(extensions:Hairline.BorderThickness)" Value="0,0,0,1"/>
                    </VisualState.Setters>
                </VisualState>
                <VisualState x:Name="Medium">
                    <VisualState.StateTriggers>
                        <AdaptiveTrigger MinWindowWidth="621" />
                    </VisualState.StateTriggers>

                    <VisualState.Setters>
                        <Setter Target="HeaderBackground.(extensions:Hairline.BorderThickness)" Value="1,0,1,1"/>
                    </VisualState.Setters>
                </VisualState>
            </VisualStateGroup>
        </VisualStateManager.VisualStateGroups>
    </Grid>
</Page>
